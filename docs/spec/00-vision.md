# ビジョン・設計原則・ペルソナ

> **ステータス**: `[Draft]`
> **最終更新**: 2026-02-08

## プロダクトビジョン

### Mission Statement

> **Claude Code セッション中の「学び」を、手間なく確実に TIL メモとして残す。**

### 解決する問題

開発者は Claude Code を使って日々新しい技術を調査し、問題を解決している。しかし、セッション中に得た学びはセッション終了とともに忘れ去られがちである。後から「あのとき何を調べたか」を振り返ろうとしても、トランスクリプトを読み返すのは非現実的である。

til-capture はこの問題を解決する:

- **検知**: WebSearch/WebFetch の使用を検知し、学びがあったセッションを自動的に識別する
- **記録**: 構造化された Markdown ファイルとして、再利用しやすい形で保存する
- **蓄積**: 日々の学びがストックとして蓄積され、振り返りやナレッジ共有に活用できる

### v1.0 ゴール

v0.3 で確立した基本機能（自動検知・手動記録・ストック表示）を土台に、以下を達成する:

1. **UX の洗練**: 信頼度ベースの確認フロー、メッセージの一貫性
2. **カスタマイズ性**: テンプレート・タグ補完による個人適応
3. **品質保証**: 重複チェック・ドラフトワークフローによる記録品質の向上
4. **拡張性**: 新規 Hook イベントの活用による検知精度の向上

## 設計原則

本プロダクトの設計判断において、以下の原則を優先順位順に適用する。

### 1. 省力化ファースト

ユーザーの手間を極力減らす。理想は「何もしなくても TIL が残っている」状態。

- **良い例**: セッション終了時に自動で TIL 記録を提案
- **悪い例**: 毎回ユーザーにタグや分類の入力を強制する
- **トレードオフ**: 省力化と記録品質のバランスは信頼度で制御する

### 2. 安全なデフォルト

確認なしに副作用のある操作をしない。ユーザーの意図しないファイル作成・変更を防ぐ。

- **良い例**: 未知の保存先にはユーザー確認を求める
- **悪い例**: `~/til/` が存在しなくても勝手に作成する
- **トレードオフ**: 安全性のために 1 クリック増えることは許容する

### 3. 段階的信頼

信頼度に応じて自動化の度合いを変える。既知の環境では省力化を優先し、未知の環境では安全性を優先する。

| 信頼度 | 条件 | 動作 |
|--------|------|------|
| 高 | CWD 内に TIL ディレクトリが存在 | 確認なしで保存先を提案 |
| 高 | config.json 設定 + ディレクトリ存在 | 確認なしで保存先を提案 |
| 低 | config.json 設定 + ディレクトリ未存在 | ユーザー確認後に操作 |
| 低 | フォールバック（`~/til/`） | ユーザー確認後に操作 |

### 4. 透明性

何が記録されたかを常にユーザーに伝える。暗黙の動作を避け、ユーザーが制御感を持てるようにする。

- セッション開始時にストック状況を表示
- TIL 保存後にファイルパスと内容を報告
- 自動検知のトリガー条件を明示する

### 5. ポータビリティ

生成物は標準的な Markdown ファイル。特定のツールやプラットフォームにロックインしない。

- frontmatter 付き Markdown（Hugo, Astro, Jekyll 等と互換）
- ファイル名規則: `YYYY-MM-DD-<slug>.md`
- ディレクトリ構造に依存しない（保存先は設定で変更可能）

## ユーザーペルソナ

### プライマリ: 学習記録型の個人開発者

| 属性 | 詳細 |
|------|------|
| **名前** | Aさん |
| **役割** | 個人開発者 / フリーランスエンジニア |
| **Claude Code 利用頻度** | 毎日 |
| **課題** | 調べたことをすぐ忘れる。後で「あれ何だったっけ」と思うことが多い |
| **ゴール** | 振り返り可能な学びのストックを最小限の手間で蓄積したい |
| **技術レベル** | CLI に慣れている。Markdown でメモを取る習慣がある |
| **期待する体験** | セッション終了時に「記録しますか？」と聞かれ、Yes で完了 |

### セカンダリ: チーム内ナレッジ共有担当

| 属性 | 詳細 |
|------|------|
| **名前** | Bさん |
| **役割** | テックリード / チーム内ナレッジ管理者 |
| **Claude Code 利用頻度** | 週数回 |
| **課題** | チームメンバーの学びが属人化している |
| **ゴール** | チーム共有の TIL リポジトリに学びを集約したい |
| **技術レベル** | SSG（Hugo 等）でチームブログを運営中 |
| **期待する体験** | TIL がチーム共有リポジトリに自動的に蓄積される |

## ユーザージャーニー

### 初回利用

```
1. Claude Code プラグインとして til-capture をインストール
2. セッション開始 → "Save to: ~/til/ (will ask, configurable via ...)" と表示
3. セッション中に WebSearch を使って技術調査
4. セッション終了 → "学びが検知されました。TIL として記録しますか？" と提案
5. ユーザーが承認 → ~/til/YYYY-MM-DD-<slug>.md が生成
6. 「こんな簡単に残せるんだ」という成功体験
```

### 日常利用

```
1. セッション開始 → "Stock: 42 entries (./til/)" と表示（蓄積の実感）
2. セッション中に自然に技術調査・問題解決
3. 途中で特に重要な学びがあれば /til で手動記録
4. セッション終了 → 自動提案を承認（または不要なら拒否）
5. 週に数件のペースで TIL が蓄積
```

### 振り返り

```
1. 過去の TIL を検索（ファイルシステム上の Markdown なので grep/rg で検索可能）
2. タグで分類された TIL をブラウズ
3. SSG でブログとして公開（Hugo, Astro 等）
4. チームメンバーと共有
```
