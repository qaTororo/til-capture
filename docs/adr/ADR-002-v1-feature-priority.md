# ADR-002: v1.0 機能の優先順位

> **ステータス**: `[Accepted]`
> **日付**: 2026-02-08
> **決定者**: プロジェクトオーナー
> **関連 Spec**: [01-feature-inventory.md](../spec/01-feature-inventory.md), [06-future-features.md](../spec/06-future-features.md)

## 背景（Context）

v0.3.0 で基本機能（自動検知 F-001、ストック表示 F-002、手動記録 F-003、保存先解決 F-004、信頼度確認 F-005、セキュリティ F-006）が完成した。v1.0 では候補として 10 個の新機能（F-101〜F-110）が挙がっており、リリースに含めるスコープを決定する必要がある。

### TIL の位置づけの再定義

当初の設計では、TIL を SSG（Hugo, Astro 等）で公開するブログ記事として活用するユースケースを想定していた（00-vision.md のセカンダリペルソナ参照）。しかし、AI 生成コンテンツの氾濫により、ユーザーは「AI らしいテキスト」の存在に疲れ始めている。

TIL の本質的な価値は **公開用記事の下書き** ではなく、**個人の知識整理・学びなおしのツール** にある。Claude が生成した TIL メモをそのまま公開するのではなく、それを起点に自分自身で知識を再構築し、自分の言葉でアウトプットすることに価値がある。

この認識は v1.0 の機能優先順位を根本的に変える:

- **参照効率の向上**（既存 TIL の検索・タグ一貫性）が最も高い価値
- **テンプレートカスタマイズ**（SSG 互換の frontmatter）は優先度低下

## 決定ドライバー（Decision Drivers）

- **TIL の本質的価値**: 知識整理・学びなおしのツール（公開記事ではない）
- **参照効率**: 蓄積した TIL を効率的に検索・活用できることが最重要
- **スコープの最小化**: v1.0 を確実にリリースするため、スコープは最小限に絞る
- **既存基盤の活用**: v0.3 の F-003（手動記録）、F-004（保存先解決）の上に自然に乗る機能を優先
- **時代背景**: AI 生成コンテンツの氾濫と「AI テキスト疲れ」

## 検討した選択肢（Considered Options）

### 選択肢 A: 元の計画（F-101 + F-102 + F-107）

当初の優先度マトリクスに従い、テンプレートカスタマイズ、タグ補完、検索の 3 機能を実装。

| 観点 | 評価 |
|------|------|
| **利点** | SSG 連携のカスタマイズ性が向上。幅広いユースケースをカバー |
| **欠点** | F-101 は「公開前提」のニーズに基づいており、現在の TIL の位置づけと合わない。スコープが広くリリースリスクが高い |
| **実装コスト** | 中〜高（3 機能分） |

### 選択肢 B: 絞り込み（F-102 + F-107）

タグ自動補完と TIL 検索・一覧表示の 2 機能に絞って実装。

| 観点 | 評価 |
|------|------|
| **利点** | 参照効率の向上に集中。TIL を「学びなおしのツール」として活用する価値に直結。スコープが小さくリリースが確実 |
| **欠点** | テンプレートカスタマイズを望むユーザーへの対応が遅れる |
| **実装コスト** | 中（2 機能分） |

### 選択肢 C: 拡大スコープ（F-102 + F-107 + F-103 + F-110）

上記 2 機能に加え、重複チェックと統計強化も含めた 4 機能。

| 観点 | 評価 |
|------|------|
| **利点** | 知識整理（重複統合）とモチベーション（統計可視化）も強化される |
| **欠点** | スコープが大きく、特に F-103（重複チェック）は複雑度が高い。リリースが遅延するリスク |
| **実装コスト** | 高（4 機能分、F-103 の複雑度が高い） |

## 決定（Decision）

**採用: 選択肢 B（F-102 + F-107）**

理由:

1. **TIL の価値再定義に整合**: 両機能とも「蓄積した学びを効率的に参照する」ことに直接貢献する
   - **F-102（タグ自動補完）**: タグの揺れを防ぎ、一貫した分類体系を構築。後からタグで検索する際の精度が向上
   - **F-107（TIL 検索・一覧表示）**: セッション内で過去の TIL を即座に参照。学びなおしのきっかけを作る
2. **F-101 を除外する根拠**: テンプレートカスタマイズは SSG での公開を前提とした機能。現在の TIL の位置づけ（個人の知識整理ツール）では優先度が低い。AI 生成テキストの氾濫により、TIL をそのまま公開するニーズは減少している
3. **スコープの確実性**: 2 機能に絞ることでリリースリスクを最小化。どちらも既存基盤（F-003, F-004）の上に乗る実装

### v1.0 機能スコープ

| ID | 機能名 | 優先度 | 根拠 |
|----|--------|--------|------|
| F-102 | タグ自動補完 | **v1.0** | タグの一貫性 → 参照効率向上 |
| F-107 | TIL 検索・一覧表示 | **v1.0** | 学びなおしの直接的な手段 |
| F-101 | テンプレートカスタマイズ | v1.1+ | SSG 公開前提のニーズ。現在は優先度低 |
| F-103 | 重複チェック | v1.1+ | 価値はあるが複雑度が高い |
| F-104 | PostToolUse(Write) 連携 | v1.1+ | Hook 仕様の安定を待つ |
| F-106 | PostToolUse(WebSearch) 連携 | v1.1+ | Hook 仕様の安定を待つ |
| F-110 | 統計・サマリー表示の強化 | v1.1+ | Nice to have |
| F-105 | UserPromptSubmit 連携 | v2+ | 低優先 |
| F-108 | Draft → Publish ワークフロー | v2+ | 公開前提のニーズ |
| F-109 | エクスポート機能 | v2+ | 公開前提のニーズ |

## 結果・影響（Consequences）

### ポジティブ

- v1.0 のスコープが明確になり、リリース計画が立てやすい
- TIL の位置づけが「知識整理ツール」に明確化され、今後の機能開発の方向性がブレない
- 2 機能とも既存の SKILL.md 拡張で実装可能で、アーキテクチャの大幅な変更が不要

### ネガティブ

- SSG 連携を期待するユーザー（セカンダリペルソナ: Bさん）への対応が v1.1+ に延期される
- F-101 を含めた元の計画からの方向転換を、ドキュメントに反映する必要がある

### リスクと緩和策

| リスク | 緩和策 |
|--------|--------|
| テンプレートカスタマイズのニーズが想定以上に強い | v1.0 リリース後のフィードバックで優先度を再評価。v1.1 で迅速に対応可能な設計を維持 |
| 2 機能では v1.0 のインパクトが小さい | 基本機能（v0.3）が十分に価値を提供している前提。v1.0 は「活用品質の向上」リリース |

## Spec ステータス変更

この ADR の Accepted に伴い、以下の Spec ステータスを変更する:

| Spec | 対象セクション | 変更前 | 変更後 |
|------|--------------|--------|--------|
| [01-feature-inventory.md](../spec/01-feature-inventory.md) | 優先度マトリクス | `[Draft]` | `[Accepted]`（マトリクス内容の更新を伴う） |
| [06-future-features.md](../spec/06-future-features.md) | F-102, F-107 のセクション | `[Draft]` | `[Accepted]` |

> **注**: 01-feature-inventory.md の優先度マトリクスは、F-101 の優先度降格と F-102/F-107 の v1.0 確定を反映して更新する。06-future-features.md のうち F-102, F-107 以外のセクションは `[Draft]` のまま維持する。

## 関連リソース

- 関連 ADR: なし
- 背景: [00-vision.md §ユーザーペルソナ](../spec/00-vision.md#ユーザーペルソナ) — TIL の位置づけの再解釈
